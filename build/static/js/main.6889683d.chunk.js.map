{"version":3,"sources":["components/styles.module.css","components/Searchbar.js","components/ImageGalleryItem.js","apiService/ApiService.js","components/Modal.js","components/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","state","find","handleChangeInput","e","setState","target","value","handleSubmit","preventDefault","trim","props","onSubmit","alert","this","className","style","SearchForm","type","SearchForm__button","SearchForm__buttonLabel","SearchForm__input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","imgArray","map","el","src","webformatURL","alt","tags","ImageGalleryItem__image","onClick","onGalleryImageClick","id","ImagesApiService","searchQuery","page","base_url","pixabay","key","per_page","newQuery","url","axios","get","then","result","data","Modal","handleEscape","code","toggleModal","handleClose","currentTarget","window","addEventListener","removeEventListener","Overlay","bigImg","largeImageURL","newImagesApiService","ImageGallery","status","showModal","handleClick","pages","searchImages","prev","hits","scroll","catch","error","imgSrc","prevProps","prevState","searchImg","resetPage","query","length","text","loading","color","height","width","timeout","Button","App","scrollTo","top","document","documentElement","offsetHeight","behavior","onPageScroll","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6889683d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"styles_Searchbar__MZQM7\",\"SearchForm\":\"styles_SearchForm__1UtAm\",\"SearchForm__button\":\"styles_SearchForm__button__3mzZE\",\"SearchForm__buttonLabel\":\"styles_SearchForm__buttonLabel__1wo7B\",\"SearchForm__input\":\"styles_SearchForm__input__37bpK\",\"ImageGallery\":\"styles_ImageGallery__2VuoT\",\"ImageGalleryItem\":\"styles_ImageGalleryItem__1XQjo\",\"ImageGalleryItem__image\":\"styles_ImageGalleryItem__image__3RMIn\",\"ImageGalleryItem-image\":\"styles_ImageGalleryItem-image__11jwm\",\"Overlay\":\"styles_Overlay__3VHVn\",\"Modal\":\"styles_Modal__1k8UN\",\"Button\":\"styles_Button__2BlLB\",\"text\":\"styles_text__2THab\",\"loading\":\"styles_loading__3zoc0\"};","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport style from \"./styles.module.css\";\n\nexport default class Searchbar extends Component {\n  state = {\n    find: \"\",\n  };\n\n  handleChangeInput = (e) => {\n    this.setState({\n      find: e.target.value,\n    });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    if (this.state.find.trim() === \"\") {\n      alert(\"Please type searchihg query\");\n      return;\n    }\n    this.props.onSubmit(this.state.find);\n    this.setState({ find: \"\" });\n  };\n\n  render() {\n    const { find } = this.state;\n    return (\n      <header className={style.Searchbar}>\n        <form className={style.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={style.SearchForm__button}>\n            <span className={style.SearchForm__buttonLabel}>Search</span>\n          </button>\n\n          <input\n            className={style.SearchForm__input}\n            type=\"text\"\n            value={find}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleChangeInput}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import React, { Component } from \"react\";\nimport style from \"./styles.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default class ImageGalleryItem extends Component {\n  render() {\n    return this.props.imgArray.map((el) => (\n      <li className={style.ImageGalleryItem} key={el.id}>\n        <img\n          src={el.webformatURL}\n          alt={el.tags}\n          className={style.ImageGalleryItem__image}\n          onClick={this.props.onGalleryImageClick}\n        />\n      </li>\n    ));\n  }\n}\n\nImageGalleryItem.propTypes = {\n  imgArray: PropTypes.array.isRequired,\n  onGalleryImageClick: PropTypes.func.isRequired,\n};\n","import axios from \"axios\";\nimport pixabay from \"../apiService/pixabay.json\";\n\nexport default class ImagesApiService {\n  constructor() {\n    this.searchQuery = \"\";\n    this.page = 1;\n    this.base_url = pixabay.base_url;\n    this.key = pixabay.key;\n    this.per_page = pixabay.per_page;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n  get pages() {\n    return this.page;\n  }\n  set pages(value) {\n    this.page += value;\n  }\n  get query() {\n    return this.searchQuery;\n  }\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  searchImages() {\n    const url = `${this.base_url}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=${this.per_page}&key=${this.key}`;\n    return axios.get(url).then((result) => result.data);\n  }\n}\n","import { Component } from \"react\";\nimport style from \"./styles.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleEscape);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleEscape);\n  }\n  handleEscape = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.toggleModal();\n    }\n  };\n  handleClose = (e) => {\n    if (e.currentTarget === e.target) {\n      this.props.toggleModal();\n    }\n  };\n  render() {\n    return (\n      <div className={style.Overlay} onClick={this.handleClose}>\n        <div className={style.Modal}>\n          <img\n            src={this.props.bigImg.largeImageURL}\n            alt={this.props.bigImg.tags}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  toggleModal: PropTypes.func.isRequired,\n  bigImg: PropTypes.object.isRequired,\n};\n","import { Component } from \"react\";\nimport style from \"./styles.module.css\";\nimport ImageGalleryItem from \"./ImageGalleryItem\";\nimport PropTypes from \"prop-types\";\nimport ImagesApiService from \"../apiService/ApiService\";\nimport Loader from \"react-loader-spinner\";\nimport Modal from \"./Modal\";\n\nconst newImagesApiService = new ImagesApiService();\n\nexport default class ImageGallery extends Component {\n  state = {\n    imgArray: [],\n    page: 1,\n    status: \"idle\",\n    showModal: false,\n    bigImg: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.searchImg !== this.props.searchImg) {\n      this.setState({ status: \"pending\" });\n      newImagesApiService.resetPage();\n      newImagesApiService.query = this.props.searchImg;\n      newImagesApiService\n        .searchImages()\n        .then((data) => {\n          if (data.hits.length > 0) {\n            this.setState({\n              imgArray: data.hits,\n              page: newImagesApiService.pages,\n              status: \"success\",\n            });\n          } else {\n            this.setState({ status: \"error\" });\n          }\n        })\n        .catch((error) => {\n          // console.log(error);\n          this.setState({ status: \"error\" });\n        });\n    }\n  }\n\n  handleClick = () => {\n    newImagesApiService.pages = 1;\n    newImagesApiService\n      .searchImages()\n      .then((data) => {\n        this.setState((prev) => ({\n          imgArray: [...prev.imgArray, ...data.hits],\n          page: newImagesApiService.pages,\n          status: \"success\",\n        }));\n        this.props.scroll();\n      })\n      .catch((error) => {\n        this.setState({ status: \"error\" });\n      });\n  };\n\n  toggleModal = () => {\n    this.setState({ showModal: !this.state.showModal });\n  };\n\n  onGalleryImageClick = (e) => {\n    e.preventDefault();\n    let imgSrc = e.target.src;\n    this.setState({\n      bigImg: this.state.imgArray.find((el) => el.webformatURL === imgSrc),\n    });\n    this.toggleModal();\n  };\n\n  render() {\n    const { imgArray, showModal, status, bigImg } = this.state;\n\n    if (status === \"idle\") {\n      return <p className={style.text}>Hello! Type some searching query</p>;\n    }\n    if (status === \"pending\") {\n      return (\n        <Loader\n          type=\"Circles\"\n          className={style.loading}\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={7000} //3 secs\n        />\n      );\n    }\n    if (status === \"success\") {\n      return (\n        <>\n          <ul className={style.ImageGallery}>\n            <ImageGalleryItem\n              imgArray={imgArray}\n              onGalleryImageClick={this.onGalleryImageClick}\n            />\n          </ul>\n          <button\n            type=\"button\"\n            onClick={this.handleClick}\n            className={style.Button}\n          >\n            Load more\n          </button>\n          {showModal && (\n            <Modal toggleModal={this.toggleModal} bigImg={bigImg}></Modal>\n          )}\n        </>\n      );\n    }\n    if (status === \"error\") {\n      return <p className={style.text}>Ooops! Something went wrong</p>;\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  searchImg: PropTypes.string.isRequired,\n  scroll: PropTypes.func.isRequired,\n};\n","import \"./App.css\";\nimport { Component } from \"react\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\n\nclass App extends Component {\n  state = {\n    searchImg: \"\",\n  };\n\n  onSubmit = (data) => {\n    this.setState({ searchImg: data });\n  };\n\n  onPageScroll() {\n    window.scrollTo({\n      top: document.documentElement.offsetHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSubmit} />\n        <ImageGallery\n          searchImg={this.state.searchImg}\n          scroll={this.onPageScroll}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}